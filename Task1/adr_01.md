### **Документ:** ADR_01

### **Название задачи:** Повысить эффективность в сфере животноводства и по максимуму автоматизировать процессы, связанные с кормлением, безопасностью и мониторингом поголовья скота

### **Автор:** Егоров Антон
### **Дата:** 01.11.2025


### **Функциональные требования**

| **Код** | **Система должна** |
| :-: | :- |
| F1  | Фиксировать признаки беспокойного поведения или драк среди животных и оповещать оператора |
| F2  | Фиксировать признаки задавливания поросят |
| F3  | Оценивать состояние животных по внешнему виду и поведению: болезнь, гибель, беспокойство и так далее |
| F4  | Управлять кормушками и поилками разных производителей |
| F5  | Следить за состоянием систем фильтрации воды |
| F6  | Следить за запасами еды и прогнозировать расход |
| F7  | Пересчитывать поголовье |
| F8  | Предоставлять базовые метрики для передачи в другие системы |
| F9  | Поддерживать возможность добавления собственных метрик |
| F10 | Поддерживать необходимое количество видеокамер для аналитики в реальном времени от разных производителей |
| F11 | Быть построена по принципу «центральный сервер — агенты» на конкретных фермах без ограничения количества таких агентов (в синхронизации между агентами и центральным сервером допускается задержка до 10 минут без учёта проблем со связью) |
| F12 | Работать даже в случае отсутствия интернета и при необходимости отправлять уведомления дежурному сотруднику на местах мониторинга, а после восстановления связи синхронизироваться с центральной системой |
| F13 | Иметь разделение ролей и поддерживать современные способы аутентификации и авторизации |
| F14 | Иметь API для создания мобильного приложения или веб-приложения |


|**№**|**Use Case**|**Действующие лица или системы**|**Требования**|**Шаги**|
| :-: | :- | :- | :- | :- |
| 1 | Оперативный мониторинг поголовья | Супервайзер фермы, система видеоаналитики | F1, F2, F3, F10, F12 | 1. Система видеоаналитики детектирует признаки, требующие немедленного вмешательства.<br>2. Система оповещает оператора о необходимости проверки состояния животных. |
| 2 | Управление жизненноважными системами фермы | Супервайзер фермы, edge устройства | F4, F5, F6, F12 | 1. Edge устройства собирают данные о состоянии систем.<br>2. Супервайзер фермы получает отчёты и при необходимости корректирует работу систем. |
| 3 | Сбор метрик | Бизнес-аналитик, аналитическая система | F7, F8, F9, F11 | 1. Аналитическая система собирает данные о поголовье, расходе ресурсов и других метриках по всем доступным фермам.<br>2. Система предоставляет отчёты и визуализации для анализа.<br>3. Бизнес-аналитик анализирует данные при помощи BI-инструментов. |
| 4 | Управление всеми фермами | Менеджер ферм, система управления фермами | F11 | 1. Менеджер ферм получает доступ к системе управления фермами.<br>2. Менеджер просматривает отчёты и метрики по всей системе или по отдельным фермам.<br>3. Менеджер принимает решения на основе полученных данных. |

> **Примечание:** Требования F13 и F14 относятся к системным и архитектурным функциям, не имеющим непосредственного взаимодействия с пользователем, поэтому они не включены в таблицу сценариев использования.


### **Нефункциональные требования**

|**Код**|**Требование**|
| :-: | :- |
| R1 | Система должна обеспечивать достаточно высокую отказоустойчивость 99,95% |
| S1 | Система должна быть расширяемой, то есть иметь возможность разработать новый функционал без изменений существующего |
| P1 | Система должна иметь высокую производительность — от момента возникновения нештатной ситуации, зафиксированной с помощью видеоаналитики, должно проходить не более 5 секунд до момента оповещения |
| P2 | Система должна позволять системе видеоаналитики реагировать в реальном времени (миллисекунды) |


### **Решение**

![Схема контекста системы](./context.png)

- На уровне C1 (_контекст системы_) участвуют 3 основных актора:
  - **Дежурный персонал фермы** (_Farm Supervisor_) — отвечает за мониторинг состояния животных и систем на ферме, получает оповещения о нештатных ситуациях, имеет доступ в масштабе одной фермы.
  - **Менеджер ферм** (_Farm Operations Manager_) — отвечает за управление несколькими фермами, получает агрегированные данные и отчёты, имеет доступ в масштабе всей системы.
  - **Бизнес-аналитик** (_Business Analyst_) — отвечает за анализ метрик и данных, использует BI-инструменты для создания отчётов и визуализаций.
- Дежурный персонал фермы (_Farm Supervisor_) абстрагирован единым актором. В реальности, это могут быть разные группы людей, ответственные за различные аспекты мониторинга и управления фермой. Система должна поддерживать возможность настройки ролей, доступов и адресации оповещений для разных пользователей.
- Система оперативного оповещения дежурного персонала (_Local Notification Service_) на ферме вынесена в отдельный "внешний" компонент, так как её реализация может сильно варьироваться в зависимости от конкретной фермы и её инфраструктуры. Разрабатываемая система должна иметь возможность интеграции с разными системами оповещения, будь то SMS, email, мессенджеры или специализированные приложения.


### **Альтернативы**
- Использование единой централизованной системы оповещений для всех ферм. Однако это решение не учитывает возможные проблемы с интернет-соединением на отдельных фермах, что может привести к задержкам в получении критически важных оповещений.


**Недостатки, ограничения, риски**

- На ферме должна быть готовая инфраструктура для оповещений, даже в случае отсутствия интернета.
